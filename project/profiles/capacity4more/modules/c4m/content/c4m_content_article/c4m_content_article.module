<?php
/**
 * @file
 * Code for the Article content type feature.
 */

include_once 'c4m_content_article.features.inc';

/**
 * Implements hook_c4m_content_statistics_info().
 */
function c4m_content_article_c4m_content_statistics_info() {
  return array(
    'global' => array(
      'c4m_articles' => array(
        'type'        => 'article',
        'entity_type' => 'node',
        'bundles'     => array('article'),
        'singular'    => 'Article',
        'plural'      => 'Articles',
        'state'       => NULL,
        'aggregate'   => array(),
        'weight'      => -5,
        'attributes'  => array(
          'class' => array('articles'),
        ),
        'link' => array(
          'path' => 'articles',
        ),
      ),
    ),
    'topic' => array(
      'c4m_topic_articles' => array(
        'type'        => 'article',
        'entity_type' => 'node',
        'bundles'     => array('article'),
        'singular'    => 'Article',
        'plural'      => 'Articles',
        'state'       => NULL,
        'aggregate'   => array(),
        'weight'      => 2,
        'attributes'  => array(
          'class' => array('topic-articles'),
        ),
        'link' => array(
          'path' => 'articles',
          'options' => array(
            'query' => array(
              'f' => array(
                'c4m_vocab_topic:@TOPIC_ID',
              ),
            ),
          ),
        ),
      ),
    ),
  );
}

/**
 * Implements hook_c4m_helper_entity_label_info().
 */
function c4m_content_article_c4m_helper_entity_label_info() {
  return array(
    'article' => array(
      'article' => t('an'),
      'singular' => t('article'),
      'plural' => t('articles'),
      'insert action' => t('posted a new article'),
      'update action' => t('updated the article'),
      'icon' => 'fa-bullhorn',
    ),
  );
}

/**
 * Implements hook_TYPE_alter().
 *
 * Using hook_c4m_offcanvas_trigger_label_left_alter().
 */
function c4m_content_article_c4m_offcanvas_trigger_label_left_alter(&$trigger_label) {
  if (arg(0) == 'articles' && empty(arg(1))) {
    $trigger_label = t('Filter results');
  }
}
